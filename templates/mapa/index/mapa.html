{% extends "base/base_mapa.html" %}

{% block section_title %}Mapa{% endblock %}

{% block own_scripts %}
	<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=ABQIAAAAXNdHFQp4lH7Zme4xpMK1pBT2yXp_ZAY8_ufC3CFXhHIE1NvwkxTR9fqZLUEmW8A_Ja4HmQOrO2lJQg" type="text/javascript"></script>
	<script src="{{ MEDIA_URL }}js/scripts.js" type="text/javascript"></script>
	<script src="{{ MEDIA_URL }}js/ClusterMarker.js" type="text/javascript"></script>
    <script type="text/javascript">
		var tokens = [];
		var map = '';
		var BusmarkersArray = [];
		var TrammarkersArray = [];
		var NightmarkersArray = [];
		var NearestmarkersArray = [];
		var cluster = '';
		var circle;
		var geocoder = null;
		var directions;

		var appKontekst = {
			'visibleBus'	:	0,
			'visibleTram'	:	0,
			'visibleNight'	:	0,
			'visibleNearest'	:	0,
			'fromMarker'	:	'',
			'toMarker'		:	'',
			'zoomLvl'		:	13,
			'zoomLvlDetail'	:	17,
			'circleRadius'	:	0.7,
			'tripDistance'	:	0,	//meters
			'tripDuration'	:	0	//seconds
		};
		
	    $(document).ready(function() {
	        $("#from").tokenInput("/exporter/podpowiedz/", {
	            hintText: "Nazwa przystanku/ulicy",
	            noResultsText: "Brak wynikow",
	            searchingText: "Trwa wyszukiwanie...",
				direction: "From"
	        });
	        $("#to").tokenInput("/exporter/podpowiedz/", {
	            hintText: "Nazwa przystanku/ulicy",
	            noResultsText: "Brak wynikow",
	            searchingText: "Trwa wyszukiwanie...",
				direction: "To"
	        });
	    });
    </script>
{% endblock %}	

{% block bodyblock %}
	onload="start()" onunload="GUnload()"
{% endblock %}

{% block mapa_content %}
	<div id="top_box">
		<div class="fl inputform">
			Z: <input type="text" id="from" name="from" />
		</div>
		<div class="fl inputform">			
			Do: <input type="text" id="to" name="to" />
		</div>
		<div class="fl" id="menu">
			<a href="#" onclick="showBusStops();return false;" id="showBusStop">Pokaż przystanki autobusowe</a>
			<a href="#" onclick="hideStops('A');return false;" id="hideBusStop" style="display:none;">Ukryj przystanki autobusowe</a>
			<br>
			
			<a href="#" onclick="showTramStops();return false;" id="showTramStop">Pokaż przystanki tramwajowe</a>
			<a href="#" onclick="hideStops('T');return false;" id="hideTramStop" style="display:none;">Ukryj przystanki tramwajowe</a>
			<br>
			
			<a href="#" onclick="showNightStops();return false;" id="showNightStop">Pokaż przystanki nocne</a>
			<a href="#" onclick="hideStops('N');return false;" id="hideNightStop" style="display:none;">Ukryj przystanki nocne</a>
			<br>
			
			<a href="#" onclick="hideNearest();return false;" class='hideNearest' style='display:none;'>Ukryj przystanki w okolicy<br></a>			
			<a href="#" onclick="hideDirection();return false;" id='hideDirection' style='display:none;'>Usuń trasę<br></a>			
		</div>
		<div class="fl" id="status">
			Dystans: <span class="distance"></span><br>
			Czas: <span class="duration"></span><br>
		</div>
		<div class="clear"></div>			
	</div>	
	<div id="map"></div>
	<div id="route_msg"></div>	
{% endblock %}
